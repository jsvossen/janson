<h1>Edit My Profile</h1>

<div class="col-md-6 col-md-offset-3">

  <%= form_for @profile, html: { multipart: true } do |f| %>
    <div class="field form-group">
      <%= f.label :name %><br />
      <%= f.text_field :name, autofocus: true, class: "form-control" %>
    </div>

    <div class="field form-group">
      <%= f.label :birthday %><br />
      <%= f.date_field :birthday, placeholder: "YYYY-MM-DD", class: "form-control" %>
    </div>

    <div class="field form-group">
      <%= f.label :location %><br />
      <%= f.text_field :location, class: "form-control" %>
    </div>

    <div class="field form-group">
      <%= f.label :about %><br />
      <%= f.text_area :about, class: "form-control" %>
    </div>

    <div class="field form-group row">
      <div class="col-md-3">
        <%= image_tag @profile.avatar.url(:thumb), alt: @profile.name %><br>
        <small class="text-muted">current avatar</small>
      </div>
      <div class="pull-left">
        <%= f.label :avatar, "Change Profile Picture" %><br />
        <%= f.file_field :avatar %>
        <p class="help-block"><small>Max file size 500KB.</small></p>
      </div>
    </div>

    <div class="actions form-group">
      <%= f.submit "Save", class: "btn btn-primary" %>
    </div>
  <% end %>

  <script type="text/javascript">
  $('#profile_avatar').bind('change', function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 0.5) {
      alert('Maximum file size is 500KB. Please choose a smaller file.');
    }
  });
</script>

<!--<hr>
  <div class="gravatar_edit">
      <%= gravatar_for User.find(@profile.user_id) %>
      <h3>Profile Picture</h3>
      <a href="http://gravatar.com/emails" target="_blank">change</a>
  </div>-->

</div>